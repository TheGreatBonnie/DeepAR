<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DeepAR</title>

    <script type="module">
        import { defineCustomElements } from 'https://cdn.jsdelivr.net/npm/@dytesdk/ui-kit@1.46.3/loader/index.es2017.js';
        defineCustomElements();
    </script>
    <!-- Import Web Core via CDN too -->
    <script src="https://cdn.dyte.in/core/dyte-1.10.0.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/deepar/js/deepar.js"> </script>
</head>
<body>
    <dyte-meeting id="my-meeting">
    
    </dyte-meeting>

    <!-- Canvas element for AR preview -->
    <!-- <canvas id="deepar-canvas" width="1520" height="820"></canvas> -->
    <!-- Initialize DeepAR and load AR effect/filter -->

    <script>

        const init = async () => {
            const meeting = await DyteClient.init({
                authToken: '',
                defaults: {
                audio: true,
                video: true,
                },
            });
            

            function RetroTheme() {
                
                return async (canvas, ctx) => {

                    const deepAR = await deepar.initialize({
                        licenseKey: '',
                        canvas: canvas,
                        effect: 'https://cdn.jsdelivr.net/npm/deepar/effects/aviators'
                    }); 
                    
                };
            }
            
            meeting.self.addVideoMiddleware(RetroTheme);

            document.getElementById('my-meeting').meeting = meeting;
        };

        init();
    </script>
</body>
</html>